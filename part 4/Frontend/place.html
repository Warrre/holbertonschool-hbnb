<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBnB - Place Details</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Enhanced Review Styles */
        .add-review {
            background: linear-gradient(135deg, rgba(180, 140, 255, 0.1), rgba(180, 140, 255, 0.05));
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(180, 140, 255, 0.2);
        }
        
        .add-review h2 {
            color: #b48cff;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .review-form {
            display: grid;
            gap: 1.5rem;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .form-group textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 2px solid rgba(180, 140, 255, 0.3);
            border-radius: 12px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .form-group textarea:focus {
            outline: none;
            border-color: #b48cff;
            box-shadow: 0 0 0 3px rgba(180, 140, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(180, 140, 255, 0.3);
            border-radius: 12px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }
        
        .form-group select:focus {
            outline: none;
            border-color: #b48cff;
            box-shadow: 0 0 0 3px rgba(180, 140, 255, 0.1);
        }
        
        .submit-review-btn {
            background: linear-gradient(135deg, #b48cff, #9966ff);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .submit-review-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(180, 140, 255, 0.4);
        }
        
        .submit-review-btn:active {
            transform: translateY(0);
        }
        
        .submit-review-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .reviews-section {
            margin-top: 3rem;
        }
        
        .reviews-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }
        
        .reviews-title {
            color: #2d3748;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .reviews-stats {
            background: linear-gradient(135deg, rgba(180, 140, 255, 0.1), rgba(180, 140, 255, 0.05));
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .review-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(180, 140, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .review-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .login-required-notice {
            background: linear-gradient(135deg, #ff9f43, #ffa502);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            margin: 2rem 0;
        }
        
        .login-required-notice a {
            color: white;
            text-decoration: underline;
            font-weight: 600;
        }
        
        .character-limit {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.5rem;
            text-align: right;
        }
        
        .rating-display {
            display: flex;
            gap: 0.2rem;
            margin: 0.5rem 0;
        }
        
        .star {
            color: #ffd700;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="nav-link">üè† Accueil</a>
            <a href="login.html" id="login-link" class="login-button">Connexion</a>
            <span id="user-info" style="display: none;">
                Bonjour <span id="username"></span> 
                <a href="#" onclick="logout()" class="logout-btn">D√©connexion</a>
            </span>
        </nav>
    </header>
    
    <main>
        <!-- Place Details Section -->
        <section id="place-details" class="place-details">
            <!-- Place details will be populated by JavaScript -->
        </section>
        
        <!-- Reviews Section -->
        <section id="reviews" class="reviews-section">
            <div class="reviews-header">
                <h2 class="reviews-title">
                    üí¨ Avis des voyageurs
                </h2>
                <div class="reviews-stats" id="reviews-stats">
                    Chargement des avis...
                </div>
            </div>
            
            <div id="reviews-list">
                <!-- Reviews will be populated by JavaScript -->
            </div>
        </section>
        
        <!-- Add Review Section -->
        <section id="add-review" class="add-review" style="display: none;">
            <h2>
                ‚úçÔ∏è Partager votre exp√©rience
            </h2>
            <p style="margin-bottom: 1.5rem; color: #666;">
                Votre avis aide les autres voyageurs √† faire le bon choix. Soyez honn√™te et constructif.
            </p>
            
            <form id="review-form" class="review-form">
                <div class="form-group">
                    <label for="review-text">
                        üìù Votre avis d√©taill√©
                    </label>
                    <textarea 
                        id="review-text" 
                        name="review-text" 
                        required 
                        placeholder="Partagez votre exp√©rience : qu'avez-vous aim√© ? Que pourrait-on am√©liorer ? Comment s'est pass√© votre s√©jour ?"
                        maxlength="1000"
                    ></textarea>
                    <div class="character-limit">
                        <span id="char-count">0</span>/1000 caract√®res
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="review-rating">
                        ‚≠ê Votre note globale
                    </label>
                    <select id="review-rating" name="review-rating" required>
                        <option value="">S√©lectionnez une note</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent (5/5)</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s bien (4/5)</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê Bien (3/5)</option>
                        <option value="2">‚≠ê‚≠ê Correct (2/5)</option>
                        <option value="1">‚≠ê D√©cevant (1/5)</option>
                    </select>
                </div>
                
                <button type="submit" class="submit-review-btn">
                    üì§ Publier mon avis
                </button>
            </form>
        </section>
        
        <!-- Login Required Notice -->
        <section id="login-required" class="login-required-notice" style="display: none;">
            <h3>üîê Connexion requise</h3>
            <p>
                Pour laisser un avis, vous devez √™tre connect√©. 
                <a href="login.html">Se connecter maintenant</a> ou d√©couvrez nos 
                <a href="login.html">comptes de d√©monstration</a>.
            </p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 HBnB. Votre plateforme de r√©servation de confiance.</p>
    </footer>
    
    <script src="scripts.js"></script>
    <script>
        // Enhanced character counter for review text
        document.addEventListener('DOMContentLoaded', function() {
            const reviewText = document.getElementById('review-text');
            const charCount = document.getElementById('char-count');
            
            if (reviewText && charCount) {
                reviewText.addEventListener('input', function() {
                    const count = this.value.length;
                    charCount.textContent = count;
                    
                    // Color coding for character limit
                    if (count > 900) {
                        charCount.style.color = '#e74c3c';
                    } else if (count > 700) {
                        charCount.style.color = '#f39c12';
                    } else if (count >= 10) {
                        charCount.style.color = '#27ae60';
                    } else {
                        charCount.style.color = '#95a5a6';
                    }
                });
            }
        });
    </script>
</body>
</html>